__API предоставляет следующую функциональность:__
1) Обучение ML-моделей с возможностью настройки гиперпараметров.
2) Гиперпараметры для разных моделей могут быть разные.
3) Количество классов моделей доступных для обучения == 2. На данный момент программа позволяет решать задачи регрессии и классификации с помощью моделей Random Forest и SVM.

__Основная информация:__
- В базе данных sqlite в MLflow осуществляется хранение данных о качестве обученных моделей - auc-roc для классификации, r2 для регрессии.
- Логирование пишется в logs/app.log
- Мониторинг отслеживается через Prometheus, таблицу со значениями метрик использования приложения можно найти в grafana
- Тестирование производится с помощью библиотеки unittest

__Порты:__
- flask-api: 8080
- prometheus: 9090 (http://0.0.0.0:9090/targets http://0.0.0.0:9090/metrics )
- grafana: 3000 (http://0.0.0.0:3000/dashboard/new?editPanel=2&tab=query )
- mlflow: 5050 (http://0.0.0.0:5050/#/experiments )

__Запуск Api осуществляется из командной строки с помощью docker-compose:__

1. Используем виртуальное окружение: ``source flask-app/venv/bin/activate``
2. Запускаем ``docker-compose up —build``

__Работа с Api:__

1. Общая информация по моделям:
``r_n = requests.get('http://0.0.0.0:8080/api/ml_models')``
- получить список моделей, доступных для обучения: ``r_n.json()['data'][0]``
- получить список обученных моделей: ``r_n.json()['data'][1]``
- id моделей:
``[s['id'] for s in r_n.json()['data'][1]['data']]``
2. Получение предсказаний конкретной модели:
``prediction = requests.get('http://0.0.0.0:8080/api/ml_models/{id}').json()``
3. Обучение новой модели:
 ``data={'problem': 'classification', 'name': 'Random Forest', 'h_tune': False, 'X':X.tolist(), 'y':y.tolist()}``
 ``requests.post('http://0.0.0.0:8080/api/ml_models', json=data)``

   Параметры:
   - problem: 'classification', 'regression'
   - name: 'Random_Forest', 'SVM'
   - h_tune: нужен ли подбор гиперпараметров (если нужен, выполняется GridSearch по фиксированной сетке)
   - X: список с фичами
   - y: список значений таргета
   
4. Удаление обученной модели:
 ``requests.delete('http://0.0.0.0:8080/api/ml_models/1')``
5. Переобучение модели:
 ``'http://0.0.0.0:8080/api/ml_models/4', 
             json={'problem': 'classification', 'name': 'SVM', 'h_tune': False}``
 
Это релиз. При дальнейших доработках можно учесть:
- обработку ошибок при добавлении неверных типов данных, неподходящих под задачу
- реализовать возможность задания гиперпараметров
- возможность скачивания модели пользователем
- др.

